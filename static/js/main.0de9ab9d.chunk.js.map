{"version":3,"sources":["helper/WebBridgeLoader.js","components/LandingPage.js","components/OtherPage.js","App.js","serviceWorker.js","index.js"],"names":["libs","concat","process","helper_WebBridgeLoader","WebBridgeLoader","Object","classCallCheck","this","loadedLib","numOfLib","gatap","window","bridge","init","callHandler","bridgeCallHandler","navbar","title","hideBackButton","showCloseIcon","_this","length","forEach","src","createScriptTag","then","push","enable","catch","Promise","res","rej","head","document","getElementsByTagName","tag","createElement","type","async","resolved","rejected","callback","successHandler","errorHandler","e","undefined","console","error","addEventListener","appendChild","LandingPage","props","possibleConstructorReturn","getPrototypeOf","call","showShare","shareType","addShare","rightItemsConfig","items","key","removeShare","showPopup","popUp","message","cancelText","okText","_ref","buttonClicked","showToast","toast","iconType","navigate","url","location","href","log","dimNavbar","isDim","color","alpha","setState","undimNavbar","copy","text","state","_this2","_this3","react_default","a","className","onClick","style","display","Component","OtherPage","App","load","HashRouter","Fragment","Route","exact","path","component","Boolean","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0de9ab9d.chunk.js","sourcesContent":["const libs = [`${process.env.PUBLIC_URL}/web_bridge.js`];\n\nclass WebBridgeLoader {\n  libs;\n  loadedLib;\n  numOfLib;\n  constructor() {\n    this.libs = libs;\n    this.loadedLib = [];\n    this.numOfLib = 0;\n  }\n\n  enable() {\n    const gatap = \"_gatap_force_disable_\";\n    if (typeof window[gatap] === \"function\") {\n      window[gatap](true);\n    }\n    const bridge = window[\"WebViewJavascriptBridge\"];\n    bridge.init();\n    window[\"bridgeCallHandler\"] = bridge.callHandler;\n    const bridgeCallHandler = window[\"bridgeCallHandler\"];\n    bridgeCallHandler(\"configurePage\", {\n      navbar: {\n        title: \"Web Bridge Showcase\",\n        hideBackButton: 1, // if you need to hide the back button\n        showCloseIcon: 1 // if you need to show the close button\n      }\n    });\n  }\n\n  load() {\n    this.numOfLib = this.libs.length;\n    this.libs.forEach(src => {\n      this.createScriptTag(src)\n        .then(() => {\n          this.loadedLib.push(src);\n          if (this.numOfLib === this.loadedLib.length) {\n            this.enable();\n          }\n        })\n        .catch(() => {\n          // cannot use WebBridge\n        });\n    });\n  }\n\n  createScriptTag(src) {\n    return new Promise((res, rej) => {\n      const head = document.getElementsByTagName(\"head\")[0];\n      const tag = document.createElement(\"script\");\n      tag.type = \"text/javascript\";\n      tag.async = false;\n      tag.src = src;\n\n      const onreadystatechange = \"onreadystatechange\";\n      const readyState = \"readyState\";\n      let resolved = false;\n      let rejected = false;\n\n      const callback = (tag[onreadystatechange] = () => {\n        if (resolved) {\n          return successHandler();\n        }\n        if (rejected) {\n          return errorHandler(\"err\");\n        }\n\n        if (tag[readyState] === \"complete\") {\n          successHandler();\n        } else if (tag[readyState] === \"error\") {\n          errorHandler(\"err\");\n        }\n      });\n\n      const successHandler = () => {\n        resolved = true;\n        res(src);\n      };\n      const errorHandler = e => {\n        rejected = true;\n        if (e.type !== undefined && e.type === \"error\") {\n          // tslint:disable-next-line:no-console\n          console.error(`Failed load resource from ${src}`);\n        } else {\n          // tslint:disable-next-line:no-console\n          console.error(\"Failed create element\");\n        }\n        rej(src);\n      };\n\n      tag.addEventListener(\"load\", successHandler);\n      tag.addEventListener(\"error\", errorHandler);\n\n      head.appendChild(tag);\n      return callback();\n    });\n  }\n}\n\nexport default new WebBridgeLoader();\n","import React, { Component } from \"react\";\nimport \"../App.css\";\n\nclass LandingPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDim: false\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"share\", e => {\n      this.showShare();\n    });\n  }\n  showShare = () => {\n    window[\"bridgeCallHandler\"](\"share\", {\n      shareType: 4\n    });\n  };\n\n  addShare = () => {\n    window[\"bridgeCallHandler\"](\"configurePage\", {\n      navbar: {\n        title: \"Web Bridge Showcase\",\n        hideBackButton: 1, // if you need to hide the back button\n        showCloseIcon: 1, // if you need to show the close button\n        rightItemsConfig: {\n          items: [\n            {\n              type: \"button\",\n              key: \"share\"\n            }\n          ]\n        }\n      }\n    });\n  };\n\n  removeShare = () => {\n    window[\"bridgeCallHandler\"](\"configurePage\", {\n      navbar: {\n        title: \"Web Bridge Showcase\",\n        hideBackButton: 1, // if you need to hide the back button\n        showCloseIcon: 1, // if you need to show the close button\n        rightItemsConfig: {\n          items: []\n        }\n      }\n    });\n  };\n\n  showPopup = () => {\n    window[\"bridgeCallHandler\"](\n      \"showPopUp\",\n      {\n        popUp: {\n          title: \"This is a popup title!\",\n          message: `This is popup message, unfortunately this popup can't show any image.`,\n          cancelText: \"Cancel Text\",\n          okText: \"Ok text\"\n        }\n      },\n      ({ buttonClicked }) => {\n        // 0 - Clicked OK\n        // 1 - Clicked Cancel\n        // 2 - (Android only) Clicked Other part of screen\n        // or back button is pressed\n        if (buttonClicked === 0) {\n          this.showShare();\n        }\n      }\n    );\n  };\n\n  showToast = () => {\n    window[\"bridgeCallHandler\"](\"showToast\", {\n      toast: {\n        iconType: \"success\", // Image on toast message. Ignored by Android. Only used by iOS. Available types: success & failure\n        message: \"This is a toast!\"\n      }\n    });\n  };\n\n  navigate = () => {\n    const url = `${window.location.href}other`;\n    console.log(url);\n    window[\"bridgeCallHandler\"](\"navigate\", {\n      url\n    });\n  };\n\n  dimNavbar = () => {\n    window[\"bridgeCallHandler\"](\"dimNavbar\", {\n      isDim: true,\n      color: \"000000\",\n      alpha: 0.5\n    });\n    this.setState({ isDim: true });\n  };\n\n  undimNavbar = () => {\n    window[\"bridgeCallHandler\"](\"dimNavbar\", {\n      isDim: false,\n      color: \"000000\",\n      alpha: 0.5\n    });\n    this.setState({ isDim: false });\n  };\n\n  copy = text => {\n    window[\"bridgeCallHandler\"](\"copyTextToClipboard\", {\n      text\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div\n          className=\"overlay\"\n          onClick={this.undimNavbar}\n          style={{ display: this.state.isDim ? \"block\" : \"none\" }}\n        >\n          <div className=\"overlay-text\">Click anywhere to undim</div>\n        </div>\n        <div className=\"item\" onClick={this.showShare}>\n          Show share menu\n        </div>\n        <div className=\"item\" onClick={this.addShare}>\n          Add share menu to navbar\n        </div>\n        <div className=\"item\" onClick={this.removeShare}>\n          Remove share menu to navbar\n        </div>\n        <div className=\"item\" onClick={this.showPopup}>\n          Show popup\n        </div>\n        <div className=\"item\" onClick={this.showToast}>\n          Show toast\n        </div>\n        <div className=\"item\" onClick={this.navigate}>\n          Move to another page\n        </div>\n        <div className=\"item\" onClick={this.dimNavbar}>\n          Dim navbar\n        </div>\n        <div\n          className=\"item\"\n          onClick={() => this.copy(\"Copy this text to clipboard!\")}\n        >\n          Copy this text to clipboard!\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LandingPage;\n","import React, { Component } from \"react\";\nimport \"../App.css\";\n\nclass OtherPage extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        Try clicking the close button on the navbar or touch your phone back\n        button!\n      </div>\n    );\n  }\n}\n\nexport default OtherPage;\n","import React, { Component } from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport WebBridgeLoader from \"./helper/WebBridgeLoader\";\nimport LandingPage from \"./components/LandingPage\";\nimport OtherPage from \"./components/OtherPage\";\n\nclass App extends Component {\n  componentDidMount() {\n    WebBridgeLoader.load();\n  }\n\n  render() {\n    return (\n      <Router>\n        <React.Fragment>\n          <Route exact path=\"/\" component={LandingPage} />\n          <Route exact path=\"/other\" component={OtherPage} />\n        </React.Fragment>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}